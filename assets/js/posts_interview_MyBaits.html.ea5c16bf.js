"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[4453],{6262:(s,i)=>{i.A=(s,i)=>{const t=s.__vccOpts||s;for(const[s,a]of i)t[s]=a;return t}},1050:(s,i,t)=>{t.r(i),t.d(i,{comp:()=>e,data:()=>l});var a=t(641);const n={},e=(0,t(6262).A)(n,[["render",function(s,i){return(0,a.uX)(),(0,a.CE)("div",null,i[0]||(i[0]=[(0,a.Fv)('<h1 id="mybatis" tabindex="-1"><a class="header-anchor" href="#mybatis"><span>MyBatis</span></a></h1><h2 id="ğŸ”¥-mybatis-é¢è¯•å…«è‚¡æ–‡" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-mybatis-é¢è¯•å…«è‚¡æ–‡"><span><strong>ğŸ”¥ MyBatis é¢è¯•å…«è‚¡æ–‡</strong></span></a></h2><hr><h3 id="_1ï¸âƒ£-ä»€ä¹ˆæ˜¯-mybatis-ğŸ“Œ" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-ä»€ä¹ˆæ˜¯-mybatis-ğŸ“Œ"><span><strong>1ï¸âƒ£ ä»€ä¹ˆæ˜¯ MyBatisï¼ŸğŸ“Œ</strong></span></a></h3><p>âœ… <strong>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶</strong>ï¼Œå®ƒ <strong>æ”¯æŒ SQL è¯­å¥çš„æ˜ å°„ã€åŠ¨æ€ SQL ç”Ÿæˆã€ç¼“å­˜æœºåˆ¶</strong>ï¼Œç®€åŒ–äº† JDBC æ“ä½œï¼Œé¿å…äº†å†—é•¿çš„ SQL ä»£ç ã€‚</p><p>âœ… <strong>MyBatis ä¸æ˜¯å…¨ ORM æ¡†æ¶</strong>ï¼Œå®ƒåªè´Ÿè´£ <strong>SQL è¯­å¥çš„æ‰§è¡Œ &amp; ç»“æœæ˜ å°„</strong>ï¼Œä¸åƒ Hibernate é‚£æ ·å®Œå…¨è‡ªåŠ¨åŒ–ã€‚</p><hr><h3 id="_2ï¸âƒ£-mybatis-çš„ä¼˜ç¼ºç‚¹-ğŸš€" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-mybatis-çš„ä¼˜ç¼ºç‚¹-ğŸš€"><span><strong>2ï¸âƒ£ MyBatis çš„ä¼˜ç¼ºç‚¹ ğŸš€</strong></span></a></h3><p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼š âœ”ï¸ <strong>çµæ´»æ€§é«˜</strong>ï¼šæ”¯æŒæ‰‹å†™ SQLï¼Œé€‚ç”¨äºå¤æ‚æŸ¥è¯¢ã€‚<br> âœ”ï¸ <strong>æ€§èƒ½ä¼˜è¶Š</strong>ï¼šSQL ç”±å¼€å‘è€…ç¼–å†™ï¼Œé¿å…äº† Hibernate çº§è”æŸ¥è¯¢å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚<br> âœ”ï¸ <strong>æ”¯æŒåŠ¨æ€ SQL</strong>ï¼šå¯ç”¨ <code>if</code>ã€<code>choose</code>ã€<code>where</code> ç­‰æ ‡ç­¾åŠ¨æ€æ‹¼æ¥ SQLã€‚<br> âœ”ï¸ <strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šæä¾› <strong>ä¸€çº§ç¼“å­˜ &amp; äºŒçº§ç¼“å­˜</strong>ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p><p>âŒ <strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li><strong>SQL éœ€æ‰‹å†™</strong>ï¼ŒSQL è¯­å¥éœ€è¦è‡ªå·±ç®¡ç†ï¼Œç»´æŠ¤è¾ƒå¤æ‚ã€‚</li><li><strong>ä¸æ”¯æŒè‡ªåŠ¨å»ºè¡¨</strong>ï¼Œä¸åƒ JPA/Hibernateï¼Œæ— æ³•è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨ã€‚</li><li><strong>å­¦ä¹ æˆæœ¬è¾ƒé«˜</strong>ï¼Œéœ€è¦æŒæ¡ XML è¯­æ³•å’Œ SQL è¯­å¥ã€‚</li></ul><hr><h3 id="_3ï¸âƒ£-mybatis-vs-jpa-hibernate-ğŸ“Š" tabindex="-1"><a class="header-anchor" href="#_3ï¸âƒ£-mybatis-vs-jpa-hibernate-ğŸ“Š"><span><strong>3ï¸âƒ£ MyBatis vs JPAï¼ˆHibernateï¼‰ğŸ“Š</strong></span></a></h3><table><thead><tr><th><strong>å¯¹æ¯”é¡¹</strong></th><th><strong>MyBatis</strong></th><th><strong>JPAï¼ˆHibernateï¼‰</strong></th></tr></thead><tbody><tr><td><strong>SQL æ§åˆ¶</strong></td><td>å¼€å‘è€…æ‰‹å†™ SQLï¼Œæ§åˆ¶ç²¾å‡†</td><td>è‡ªåŠ¨ç”Ÿæˆ SQLï¼Œç®€åŒ–å¼€å‘</td></tr><tr><td><strong>æŸ¥è¯¢æ€§èƒ½</strong></td><td>SQL å¯ä¼˜åŒ–ï¼Œæ€§èƒ½é«˜</td><td>å¯èƒ½ç”Ÿæˆå¤æ‚ SQLï¼Œæ€§èƒ½å—å½±å“</td></tr><tr><td><strong>å­¦ä¹ æˆæœ¬</strong></td><td>éœ€è¦æŒæ¡ SQL å’Œ XML</td><td>ç®€å•æ˜“å­¦</td></tr><tr><td><strong>ç¼“å­˜æœºåˆ¶</strong></td><td>ä¸€çº§ç¼“å­˜ &amp; äºŒçº§ç¼“å­˜</td><td>å†…ç½®ç¼“å­˜ä¼˜åŒ–æŸ¥è¯¢</td></tr><tr><td><strong>ç»´æŠ¤æˆæœ¬</strong></td><td>SQL ç»´æŠ¤é‡å¤§</td><td>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œæ˜“ç»´æŠ¤</td></tr><tr><td><strong>äº‹åŠ¡ç®¡ç†</strong></td><td>ä¾èµ– Spring ç®¡ç†äº‹åŠ¡</td><td>å†…ç½®äº‹åŠ¡ç®¡ç†</td></tr></tbody></table><p>âœ… <strong>ç»“è®º</strong>ï¼š<br><strong>æŸ¥è¯¢å¤æ‚ã€è¿½æ±‚é«˜æ€§èƒ½ï¼Œé€‰ MyBatisï¼›</strong><br><strong>CRUD ç®€å•ã€å¸Œæœ›è‡ªåŠ¨åŒ–ï¼Œé€‰ JPAï¼ˆHibernateï¼‰ã€‚</strong></p><hr><h3 id="_4ï¸âƒ£-mybatis-çš„æ ¸å¿ƒç»„ä»¶-ğŸ› " tabindex="-1"><a class="header-anchor" href="#_4ï¸âƒ£-mybatis-çš„æ ¸å¿ƒç»„ä»¶-ğŸ› "><span><strong>4ï¸âƒ£ MyBatis çš„æ ¸å¿ƒç»„ä»¶ ğŸ› </strong></span></a></h3><p>âœ… <strong>SqlSessionFactory</strong>ï¼š</p><ul><li>è´Ÿè´£åˆ›å»º <strong>SqlSession</strong> å®ä¾‹ã€‚</li><li><strong>ç®¡ç†æ•°æ®åº“è¿æ¥ã€äº‹åŠ¡ã€ç¼“å­˜ç­‰</strong>ã€‚</li></ul><p>âœ… <strong>SqlSession</strong>ï¼š</p><ul><li><strong>æ‰§è¡Œ SQL è¯­å¥</strong>ï¼Œç®¡ç†äº‹åŠ¡ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ã€‚</li><li><strong>è·å– Mapper</strong>ï¼ˆMyBatis é€šè¿‡ <code>Mapper</code> æ¥å£æ“ä½œæ•°æ®åº“ï¼‰ã€‚</li></ul><p>âœ… <strong>Mapperï¼ˆæ˜ å°„å™¨ï¼‰</strong>ï¼š</p><ul><li><strong>å­˜æ”¾ SQL è¯­å¥çš„ XML æ–‡ä»¶</strong> æˆ–è€… <strong>æ³¨è§£ SQL</strong>ï¼ˆ<code>@Select</code>ã€<code>@Insert</code>ï¼‰ã€‚</li><li>å…³è” <code>Mapper.xml</code>ï¼Œå®ç° <strong>Java æ–¹æ³• â†’ SQL è¯­å¥çš„æ˜ å°„</strong>ã€‚</li></ul><p>âœ… <strong>é…ç½®æ–‡ä»¶ï¼ˆmybatis-config.xmlï¼‰</strong>ï¼š</p><ul><li><strong>ç®¡ç†å…¨å±€é…ç½®</strong>ï¼ˆç¯å¢ƒã€æ•°æ®æºã€åˆ«åã€ç¼“å­˜ç­–ç•¥ç­‰ï¼‰ã€‚</li></ul><p>âœ… <strong>æ˜ å°„æ–‡ä»¶ï¼ˆXXXMapper.xmlï¼‰</strong>ï¼š</p><ul><li><strong>å®šä¹‰ SQL è¯­å¥</strong>ï¼Œæä¾› CRUD æ“ä½œã€‚</li></ul><hr><h3 id="_5ï¸âƒ£-mybatis-å·¥ä½œæµç¨‹-ğŸ”„" tabindex="-1"><a class="header-anchor" href="#_5ï¸âƒ£-mybatis-å·¥ä½œæµç¨‹-ğŸ”„"><span><strong>5ï¸âƒ£ MyBatis å·¥ä½œæµç¨‹ ğŸ”„</strong></span></a></h3><p>1ï¸âƒ£ <strong>è¯»å– MyBatis é…ç½®æ–‡ä»¶</strong>ï¼ˆ<code>mybatis-config.xml</code>ï¼‰ï¼Œåˆ›å»º <code>SqlSessionFactory</code>ã€‚<br> 2ï¸âƒ£ <strong>é€šè¿‡ <code>SqlSessionFactory</code> è·å– <code>SqlSession</code></strong>ï¼Œå»ºç«‹æ•°æ®åº“è¿æ¥ã€‚<br> 3ï¸âƒ£ <strong>è°ƒç”¨ Mapper æ‰§è¡Œ SQL</strong>ï¼ŒæŸ¥è¯¢æ•°æ®ã€‚<br> 4ï¸âƒ£ <strong>è¿”å›ç»“æœï¼ŒMyBatis è§£æ SQL å¹¶å°è£…ä¸ºå¯¹è±¡</strong>ã€‚<br> 5ï¸âƒ£ <strong>å…³é—­ <code>SqlSession</code></strong>ï¼Œé‡Šæ”¾èµ„æºã€‚</p><hr><h3 id="_6ï¸âƒ£-mybatis-çš„ä¸€çº§ç¼“å­˜-äºŒçº§ç¼“å­˜-ğŸ”¥" tabindex="-1"><a class="header-anchor" href="#_6ï¸âƒ£-mybatis-çš„ä¸€çº§ç¼“å­˜-äºŒçº§ç¼“å­˜-ğŸ”¥"><span><strong>6ï¸âƒ£ MyBatis çš„ä¸€çº§ç¼“å­˜ &amp; äºŒçº§ç¼“å­˜ ğŸ”¥</strong></span></a></h3><p>âœ… <strong>ä¸€çº§ç¼“å­˜ï¼ˆé»˜è®¤å¼€å¯ï¼‰</strong>ï¼š</p><ul><li>ä½œç”¨èŒƒå›´ï¼š<strong>SqlSession çº§åˆ«</strong>ï¼ˆåŒä¸€ä¸ª <code>SqlSession</code> å†…éƒ¨å…±äº«ï¼‰ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼š <ul><li>æŸ¥è¯¢ç›¸åŒ SQL <strong>ä¸ä¼šå†æ¬¡è®¿é—®æ•°æ®åº“</strong>ï¼Œç›´æ¥ä»ç¼“å­˜å–ã€‚</li><li><code>SqlSession.close()</code> åç¼“å­˜å¤±æ•ˆã€‚</li></ul></li></ul><p>âœ… <strong>äºŒçº§ç¼“å­˜ï¼ˆæ‰‹åŠ¨å¼€å¯ï¼‰</strong>ï¼š</p><ul><li>ä½œç”¨èŒƒå›´ï¼š<strong>Mapper çº§åˆ«ï¼ˆè·¨ SqlSession å…±äº«ï¼‰</strong>ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼š <ul><li><strong>æ•°æ®å­˜å‚¨åœ¨ <code>namespace</code> çº§åˆ«çš„ç¼“å­˜ä¸­</strong>ï¼Œä¸åŒ <code>SqlSession</code> å…±äº«ã€‚</li><li>éœ€åœ¨ <code>Mapper.xml</code> æ·»åŠ  <code>&lt;cache /&gt;</code> æ‰‹åŠ¨å¼€å¯ã€‚</li><li><strong>äº‹åŠ¡æäº¤åæ‰ä¼šç¼“å­˜æ•°æ®</strong>ï¼ˆä¸ä¼šç«‹å³å†™å…¥ç¼“å­˜ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="_7ï¸âƒ£-mybatis-å¦‚ä½•å¤„ç†æ‡’åŠ è½½-å»¶è¿ŸåŠ è½½-â³" tabindex="-1"><a class="header-anchor" href="#_7ï¸âƒ£-mybatis-å¦‚ä½•å¤„ç†æ‡’åŠ è½½-å»¶è¿ŸåŠ è½½-â³"><span><strong>7ï¸âƒ£ MyBatis å¦‚ä½•å¤„ç†æ‡’åŠ è½½ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ï¼Ÿâ³</strong></span></a></h3><p>âœ… <strong>æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰</strong>ï¼šåªæœ‰ <strong>çœŸæ­£éœ€è¦ç”¨åˆ°æ•°æ®æ—¶æ‰ä¼šåŠ è½½</strong>ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚<br> âœ… <strong>å¼€å¯æ–¹å¼</strong>ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">setting</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;lazyLoadingEnabled&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;true&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">setting</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;aggressiveLazyLoading&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;false&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>âœ… <strong>é»˜è®¤æƒ…å†µä¸‹</strong>ï¼ŒMyBatis åªä¼š<strong>å¯¹å…³è”å¯¹è±¡ï¼ˆå¦‚ <code>List&lt;User&gt;</code>ï¼‰è¿›è¡Œæ‡’åŠ è½½</strong>ï¼Œ<strong>åŸºæœ¬æ•°æ®ç±»å‹é»˜è®¤ç«‹å³åŠ è½½</strong>ã€‚</p><hr><h3 id="_8ï¸âƒ£-mybatis-åŠ¨æ€-sql-çµæ´»æ‹¼æ¥-sql-è¯­å¥-ğŸ“Œ" tabindex="-1"><a class="header-anchor" href="#_8ï¸âƒ£-mybatis-åŠ¨æ€-sql-çµæ´»æ‹¼æ¥-sql-è¯­å¥-ğŸ“Œ"><span><strong>8ï¸âƒ£ MyBatis åŠ¨æ€ SQLï¼ˆçµæ´»æ‹¼æ¥ SQL è¯­å¥ï¼‰ğŸ“Œ</strong></span></a></h3><p>âœ… <strong>åŠ¨æ€ SQL</strong> ä½œç”¨ï¼šæ ¹æ®ä¸åŒå‚æ•° <strong>åŠ¨æ€ç”Ÿæˆ SQL</strong>ï¼Œé¿å… <code>if-else</code> æ‹¼æ¥å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€‚</p><p>âœ… <strong>å¸¸ç”¨æ ‡ç­¾</strong>ï¼š</p><table><thead><tr><th><strong>æ ‡ç­¾</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td><code>&lt;if&gt;</code></td><td><strong>æ¡ä»¶åˆ¤æ–­</strong>ï¼ˆ<code>if test=&quot;id != null&quot;</code>ï¼‰</td></tr><tr><td><code>&lt;choose&gt;</code> / <code>&lt;when&gt;</code> / <code>&lt;otherwise&gt;</code></td><td><strong>ç±»ä¼¼ <code>switch-case</code> è¯­å¥</strong></td></tr><tr><td><code>&lt;where&gt;</code></td><td><strong>è‡ªåŠ¨å»æ‰ <code>where</code> åå¤šä½™çš„ <code>AND</code></strong></td></tr><tr><td><code>&lt;set&gt;</code></td><td><strong>ç”¨äº <code>UPDATE</code> è¯­å¥ï¼Œå»æ‰ <code>SET</code> åå¤šä½™ <code>,</code></strong></td></tr><tr><td><code>&lt;foreach&gt;</code></td><td><strong>ç”¨äº <code>IN</code> è¯­å¥éå†æ•°ç»„ / List</strong></td></tr></tbody></table><p>âœ… <strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">select</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;getUserByCondition&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> resultType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;User&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    SELECT * FROM user</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">if</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;username != null&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;AND username = #{username}&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">if</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;age != null&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;AND age = #{age}&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_9ï¸âƒ£-mybatis-ä¸­-å’Œ-çš„åŒºåˆ«-â“" tabindex="-1"><a class="header-anchor" href="#_9ï¸âƒ£-mybatis-ä¸­-å’Œ-çš„åŒºåˆ«-â“"><span><strong>9ï¸âƒ£ MyBatis ä¸­ <code>#{} </code>å’Œ <code>${}</code> çš„åŒºåˆ« â“</strong></span></a></h3><table><thead><tr><th><strong>å¯¹æ¯”é¡¹</strong></th><th><strong>#{}ï¼ˆå®‰å…¨ï¼‰</strong></th><th><strong>${}ï¼ˆä¸å®‰å…¨ï¼‰</strong></th></tr></thead><tbody><tr><td><strong>SQL è§£æ</strong></td><td><strong>å ä½ç¬¦</strong>ï¼Œä½¿ç”¨ <code>PreparedStatement</code> é¢„ç¼–è¯‘</td><td><strong>ç›´æ¥æ‹¼æ¥ SQL</strong>ï¼Œå®¹æ˜“ SQL æ³¨å…¥</td></tr><tr><td><strong>SQL è¯­æ³•</strong></td><td><code>WHERE id = #{id}</code></td><td><code>WHERE id = ${id}</code></td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td><strong>å®‰å…¨æ’å…¥å‚æ•°</strong></td><td><strong>åŠ¨æ€è¡¨å / åˆ—å</strong></td></tr></tbody></table><p>âœ… <strong>å»ºè®®ï¼šå¤§éƒ¨åˆ†åœºæ™¯ä½¿ç”¨ <code>#{}</code>ï¼Œé¿å… SQL æ³¨å…¥ï¼</strong></p><hr><h3 id="ğŸ”Ÿ-mybatis-ä¸­-resultmap-å’Œ-resulttype" tabindex="-1"><a class="header-anchor" href="#ğŸ”Ÿ-mybatis-ä¸­-resultmap-å’Œ-resulttype"><span><strong>ğŸ”Ÿ MyBatis ä¸­ <code>resultMap</code> å’Œ <code>resultType</code></strong></span></a></h3><p>âœ… <strong><code>resultType</code>ï¼ˆç®€å•ï¼‰</strong>ï¼š</p><ul><li>é€‚ç”¨äº <strong>æŸ¥è¯¢ç»“æœå’Œ Java ç±»å­—æ®µåä¸€è‡´</strong>ã€‚</li><li>ä¾‹å¦‚ï¼š</li></ul><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">select</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;getUser&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> resultType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;com.example.User&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    SELECT id, name, age FROM user</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>âœ… <strong><code>resultMap</code>ï¼ˆå¤æ‚æ˜ å°„ï¼‰</strong>ï¼š</p><ul><li><strong>ç”¨äºå­—æ®µåä¸æ•°æ®åº“ä¸åŒ¹é…çš„æƒ…å†µ</strong>ï¼ˆå¦‚ <code>user_name -&gt; userName</code>ï¼‰ã€‚</li><li>ä¾‹å¦‚ï¼š</li></ul><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">resultMap</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;UserResultMap&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;User&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> column</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;id&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">result</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> column</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;user_name&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> property</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userName&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">resultMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">select</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;getUser&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> resultMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;UserResultMap&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    SELECT id, user_name FROM user</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="ğŸ’¡-mybatis-è¿›é˜¶é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-mybatis-è¿›é˜¶é—®é¢˜"><span><strong>ğŸ’¡ MyBatis è¿›é˜¶é—®é¢˜</strong></span></a></h3><p>âœ… <strong>MyBatis å¦‚ä½•å®ç°åŠ¨æ€æ•°æ®æºåˆ‡æ¢ï¼Ÿ</strong></p><ul><li><strong>åŸºäº <code>AbstractRoutingDataSource</code> ç»“åˆ AOP å®ç°æ•°æ®æºåŠ¨æ€åˆ‡æ¢</strong>ã€‚</li><li><strong>ä½¿ç”¨ <code>ThreadLocal</code> è®°å½•å½“å‰çº¿ç¨‹æ•°æ®æºä¿¡æ¯</strong>ã€‚</li></ul><p>âœ… <strong>MyBatis å¦‚ä½•å®ç°åˆ†é¡µï¼Ÿ</strong></p><ul><li><strong>ä¸¤ç§æ–¹å¼</strong>ï¼š <ul><li><strong>ä½¿ç”¨ <code>RowBounds</code>ï¼ˆå†…å­˜åˆ†é¡µï¼Œä¸æ¨èï¼‰</strong>ã€‚</li><li><strong>ä½¿ç”¨æ•°æ®åº“ <code>limit</code> åˆ†é¡µï¼ˆæ¨èï¼‰</strong>ï¼š</li></ul><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SELECT * FROM user LIMIT #{offset}, #{pageSize}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><p>âœ… <strong>MyBatis æ’ä»¶åŸç†ï¼Ÿ</strong></p><ul><li><strong>æ‹¦æˆª <code>Executor</code>ã€<code>StatementHandler</code>ã€<code>ResultSetHandler</code> ç­‰æ ¸å¿ƒç»„ä»¶</strong>ï¼Œå®ç° <strong>SQL ç›‘æ§ã€æ—¥å¿—æ‰“å°ã€è‡ªåŠ¨åˆ†é¡µ</strong>ã€‚</li></ul><hr><h3 id="ğŸ”¥-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-æ€»ç»“"><span><strong>ğŸ”¥ æ€»ç»“</strong></span></a></h3><p>1ï¸âƒ£ MyBatis æ˜¯ <strong>SQL æ˜ å°„æ¡†æ¶</strong>ï¼Œæ”¯æŒ<strong>æ‰‹å†™ SQL &amp; é«˜æ€§èƒ½æŸ¥è¯¢</strong>ã€‚<br> 2ï¸âƒ£ <strong>ä¸€çº§ç¼“å­˜ &amp; äºŒçº§ç¼“å­˜</strong> æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œä½†ä½¿ç”¨éœ€è°¨æ…ã€‚<br> 3ï¸âƒ£ <strong>åŠ¨æ€ SQL</strong> é€šè¿‡ <code>&lt;if&gt;</code>ã€<code>&lt;foreach&gt;</code> ç­‰æ ‡ç­¾æé«˜çµæ´»æ€§ã€‚<br> 4ï¸âƒ£ <strong>æ’ä»¶æœºåˆ¶</strong> å¯ç”¨äº<strong>æ‹¦æˆª SQLã€åˆ†é¡µã€æ—¥å¿—ç­‰åŠŸèƒ½</strong>ã€‚</p>',71)]))}]]),l=JSON.parse('{"path":"/posts/interview/MyBaits.html","title":"MyBatis","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2024-03-13T00:00:00.000Z","category":["é¢è¯•"],"tag":["MyBatis"],"description":"MyBatis ğŸ”¥ MyBatis é¢è¯•å…«è‚¡æ–‡ 1ï¸âƒ£ ä»€ä¹ˆæ˜¯ MyBatisï¼ŸğŸ“Œ âœ… MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒ æ”¯æŒ SQL è¯­å¥çš„æ˜ å°„ã€åŠ¨æ€ SQL ç”Ÿæˆã€ç¼“å­˜æœºåˆ¶ï¼Œç®€åŒ–äº† JDBC æ“ä½œï¼Œé¿å…äº†å†—é•¿çš„ SQL ä»£ç ã€‚ âœ… MyBatis ä¸æ˜¯å…¨ ORM æ¡†æ¶ï¼Œå®ƒåªè´Ÿè´£ SQL è¯­å¥çš„æ‰§è¡Œ & ç»“æœæ˜ å°„ï¼Œä¸åƒ Hibernat...","head":[["meta",{"property":"og:url","content":"https://github.com/Mly66/blog/posts/interview/MyBaits.html"}],["meta",{"property":"og:site_name","content":"é©¬ç‘¶ç‘¶ç‘¶ç‘¶ç‘¶"}],["meta",{"property":"og:title","content":"MyBatis"}],["meta",{"property":"og:description","content":"MyBatis ğŸ”¥ MyBatis é¢è¯•å…«è‚¡æ–‡ 1ï¸âƒ£ ä»€ä¹ˆæ˜¯ MyBatisï¼ŸğŸ“Œ âœ… MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒ æ”¯æŒ SQL è¯­å¥çš„æ˜ å°„ã€åŠ¨æ€ SQL ç”Ÿæˆã€ç¼“å­˜æœºåˆ¶ï¼Œç®€åŒ–äº† JDBC æ“ä½œï¼Œé¿å…äº†å†—é•¿çš„ SQL ä»£ç ã€‚ âœ… MyBatis ä¸æ˜¯å…¨ ORM æ¡†æ¶ï¼Œå®ƒåªè´Ÿè´£ SQL è¯­å¥çš„æ‰§è¡Œ & ç»“æœæ˜ å°„ï¼Œä¸åƒ Hibernat..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-13T02:59:15.000Z"}],["meta",{"property":"article:tag","content":"MyBatis"}],["meta",{"property":"article:published_time","content":"2024-03-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-13T02:59:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MyBatis\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-03-13T00:00:00.000Z\\",\\"dateModified\\":\\"2025-03-13T02:59:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Mly\\",\\"url\\":\\"https://mly66.github.io/blog/\\"}]}"]]},"headers":[{"level":2,"title":"ğŸ”¥ MyBatis é¢è¯•å…«è‚¡æ–‡","slug":"ğŸ”¥-mybatis-é¢è¯•å…«è‚¡æ–‡","link":"#ğŸ”¥-mybatis-é¢è¯•å…«è‚¡æ–‡","children":[{"level":3,"title":"1ï¸âƒ£ ä»€ä¹ˆæ˜¯ MyBatisï¼ŸğŸ“Œ","slug":"_1ï¸âƒ£-ä»€ä¹ˆæ˜¯-mybatis-ğŸ“Œ","link":"#_1ï¸âƒ£-ä»€ä¹ˆæ˜¯-mybatis-ğŸ“Œ","children":[]},{"level":3,"title":"2ï¸âƒ£ MyBatis çš„ä¼˜ç¼ºç‚¹ ğŸš€","slug":"_2ï¸âƒ£-mybatis-çš„ä¼˜ç¼ºç‚¹-ğŸš€","link":"#_2ï¸âƒ£-mybatis-çš„ä¼˜ç¼ºç‚¹-ğŸš€","children":[]},{"level":3,"title":"3ï¸âƒ£ MyBatis vs JPAï¼ˆHibernateï¼‰ğŸ“Š","slug":"_3ï¸âƒ£-mybatis-vs-jpa-hibernate-ğŸ“Š","link":"#_3ï¸âƒ£-mybatis-vs-jpa-hibernate-ğŸ“Š","children":[]},{"level":3,"title":"4ï¸âƒ£ MyBatis çš„æ ¸å¿ƒç»„ä»¶ ğŸ› ","slug":"_4ï¸âƒ£-mybatis-çš„æ ¸å¿ƒç»„ä»¶-ğŸ› ","link":"#_4ï¸âƒ£-mybatis-çš„æ ¸å¿ƒç»„ä»¶-ğŸ› ","children":[]},{"level":3,"title":"5ï¸âƒ£ MyBatis å·¥ä½œæµç¨‹ ğŸ”„","slug":"_5ï¸âƒ£-mybatis-å·¥ä½œæµç¨‹-ğŸ”„","link":"#_5ï¸âƒ£-mybatis-å·¥ä½œæµç¨‹-ğŸ”„","children":[]},{"level":3,"title":"6ï¸âƒ£ MyBatis çš„ä¸€çº§ç¼“å­˜ & äºŒçº§ç¼“å­˜ ğŸ”¥","slug":"_6ï¸âƒ£-mybatis-çš„ä¸€çº§ç¼“å­˜-äºŒçº§ç¼“å­˜-ğŸ”¥","link":"#_6ï¸âƒ£-mybatis-çš„ä¸€çº§ç¼“å­˜-äºŒçº§ç¼“å­˜-ğŸ”¥","children":[]},{"level":3,"title":"7ï¸âƒ£ MyBatis å¦‚ä½•å¤„ç†æ‡’åŠ è½½ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ï¼Ÿâ³","slug":"_7ï¸âƒ£-mybatis-å¦‚ä½•å¤„ç†æ‡’åŠ è½½-å»¶è¿ŸåŠ è½½-â³","link":"#_7ï¸âƒ£-mybatis-å¦‚ä½•å¤„ç†æ‡’åŠ è½½-å»¶è¿ŸåŠ è½½-â³","children":[]},{"level":3,"title":"8ï¸âƒ£ MyBatis åŠ¨æ€ SQLï¼ˆçµæ´»æ‹¼æ¥ SQL è¯­å¥ï¼‰ğŸ“Œ","slug":"_8ï¸âƒ£-mybatis-åŠ¨æ€-sql-çµæ´»æ‹¼æ¥-sql-è¯­å¥-ğŸ“Œ","link":"#_8ï¸âƒ£-mybatis-åŠ¨æ€-sql-çµæ´»æ‹¼æ¥-sql-è¯­å¥-ğŸ“Œ","children":[]},{"level":3,"title":"9ï¸âƒ£ MyBatis ä¸­ #{} å’Œ ${} çš„åŒºåˆ« â“","slug":"_9ï¸âƒ£-mybatis-ä¸­-å’Œ-çš„åŒºåˆ«-â“","link":"#_9ï¸âƒ£-mybatis-ä¸­-å’Œ-çš„åŒºåˆ«-â“","children":[]},{"level":3,"title":"ğŸ”Ÿ MyBatis ä¸­ resultMap å’Œ resultType","slug":"ğŸ”Ÿ-mybatis-ä¸­-resultmap-å’Œ-resulttype","link":"#ğŸ”Ÿ-mybatis-ä¸­-resultmap-å’Œ-resulttype","children":[]},{"level":3,"title":"ğŸ’¡ MyBatis è¿›é˜¶é—®é¢˜","slug":"ğŸ’¡-mybatis-è¿›é˜¶é—®é¢˜","link":"#ğŸ’¡-mybatis-è¿›é˜¶é—®é¢˜","children":[]},{"level":3,"title":"ğŸ”¥ æ€»ç»“","slug":"ğŸ”¥-æ€»ç»“","link":"#ğŸ”¥-æ€»ç»“","children":[]}]}],"git":{"createdTime":1741834755000,"updatedTime":1741834755000,"contributors":[{"name":"Mly66","email":"3127328609@qq.com","commits":1}]},"readingTime":{"minutes":4.36,"words":1307},"filePathRelative":"posts/interview/MyBaits.md","localizedDate":"2024å¹´3æœˆ13æ—¥","excerpt":"\\n<h2><strong>ğŸ”¥ MyBatis é¢è¯•å…«è‚¡æ–‡</strong></h2>\\n<hr>\\n<h3><strong>1ï¸âƒ£ ä»€ä¹ˆæ˜¯ MyBatisï¼ŸğŸ“Œ</strong></h3>\\n<p>âœ… <strong>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶</strong>ï¼Œå®ƒ <strong>æ”¯æŒ SQL è¯­å¥çš„æ˜ å°„ã€åŠ¨æ€ SQL ç”Ÿæˆã€ç¼“å­˜æœºåˆ¶</strong>ï¼Œç®€åŒ–äº† JDBC æ“ä½œï¼Œé¿å…äº†å†—é•¿çš„ SQL ä»£ç ã€‚</p>\\n<p>âœ… <strong>MyBatis ä¸æ˜¯å…¨ ORM æ¡†æ¶</strong>ï¼Œå®ƒåªè´Ÿè´£ <strong>SQL è¯­å¥çš„æ‰§è¡Œ &amp; ç»“æœæ˜ å°„</strong>ï¼Œä¸åƒ Hibernate é‚£æ ·å®Œå…¨è‡ªåŠ¨åŒ–ã€‚</p>","autoDesc":true}')}}]);